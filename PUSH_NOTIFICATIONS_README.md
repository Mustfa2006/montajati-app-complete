# ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ ุงูุงุญุชุฑุงูู
## Professional Push Notifications System

### ๐ ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุทููุฑ ูุธุงู ุฅุดุนุงุฑุงุช ููุฑูุฉ ุงุญุชุฑุงูู ูุชูุงูู ูุชุทุจูู ุงูุฏุฑูุจ ุดูุจูุฌ "ููุชุฌุงุชู" ูุฏุนู ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ูุณุชูุฏูุฉ ูุฃูุซุฑ ูู 100,000 ูุณุชุฎุฏู ุจููุงุกุฉ ุนุงููุฉ.

---

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### Frontend (Flutter)
- **Firebase Core**: ^3.15.1
- **Firebase Messaging**: ^15.2.9
- **Flutter Local Notifications**: ^19.3.0
- **Device Info Plus**: ^11.1.0

### Backend (Node.js)
- **Firebase Admin SDK**: ^12.7.0
- **Supabase Client**: ูุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **Express.js**: ููู API endpoints
- **Node-cron**: ููููุงู ุงูุฏูุฑูุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช (Supabase)
- **fcm_tokens**: ุฌุฏูู ุญูุธ ุฑููุฒ ุงูุฅุดุนุงุฑุงุช
- **notification_logs**: ุฌุฏูู ุชุณุฌูู ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ

---

## ๐ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### โ ุฅุดุนุงุฑุงุช ููุฑูุฉ 100%
- ุฅุฑุณุงู ููุฑู ูุญุธุฉ ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
- ูุง ุชูุฌุฏ ุชุฃุฎูุฑุงุช ุฃู ุญููู ูุคูุชุฉ
- ูุธุงู production-ready

### ๐ฏ ุฅุดุนุงุฑุงุช ูุณุชูุฏูุฉ
- ูู ูุณุชุฎุฏู ูุฏูู FCM Token ุฎุงุต
- ุฅุฑุณุงู ูููุณุชุฎุฏู ุงููุญุฏุฏ ููุท
- ูุง ููุฌุฏ broadcast ุฃู ุฅุฑุณุงู ุฌูุงุนู

### ๐ ูุงุจููุฉ ุงูุชูุณุน
- ูุฏุนู ุฃูุซุฑ ูู 100,000 ูุณุชุฎุฏู
- ูุธุงู ุฅุฏุงุฑุฉ Tokens ุฐูู
- ุชูุธูู ุชููุงุฆู ููุฑููุฒ ุงููุฏููุฉ

### ๐ง ุฅุฏุงุฑุฉ ุงุญุชุฑุงููุฉ
- ุชุชุจุน ุญุงูุฉ ุฌููุน ุงูุฑููุฒ
- ุฅุญุตุงุฆูุงุช ููุตูุฉ
- ููุงู ุตูุงูุฉ ุฏูุฑูุฉ

---

## ๐ฑ ููููุฉ ุนูู ุงููุธุงู

### 1. ุชุณุฌูู ุงููุณุชุฎุฏู
```dart
// ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
await FCMService.registerCurrentUserToken();
```

### 2. ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
```dart
// ูู ููุญุฉ ุงูุชุญูู ุฃู API ุงููุณูุท
await AdminService.updateOrderStatus(
  orderNumber: "12345",
  newStatus: "shipped",
  customerPhone: "0501234567"
);
```

### 3. ุฅุฑุณุงู ุงูุฅุดุนุงุฑ
```javascript
// Backend ูุฑุณู ุฅุดุนุงุฑ ููุฑู
await targetedNotificationService.sendOrderStatusNotification(
  userPhone: "0501234567",
  orderId: "12345",
  newStatus: "shipped",
  customerName: "ุฃุญูุฏ ูุญูุฏ"
);
```

---

## ๐ง ุฅุนุฏุงุฏ ุงููุธุงู

### 1. ุฅุนุฏุงุฏ Firebase
```bash
# ุฅูุดุงุก ูุดุฑูุน Firebase ุฌุฏูุฏ
# ุชุญููู google-services.json
# ุฅุนุฏุงุฏ Firebase Admin SDK
```

### 2. ูุชุบูุฑุงุช ุงูุจูุฆุฉ
```env
FIREBASE_PROJECT_ID=montajati-app-7767d
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----..."
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-...@....iam.gserviceaccount.com
FIREBASE_CLIENT_ID=123456789
```

### 3. ูุงุนุฏุฉ ุงูุจูุงูุงุช
```sql
-- ุฌุฏูู FCM Tokens
CREATE TABLE fcm_tokens (
  id UUID PRIMARY KEY,
  user_phone VARCHAR(20),
  fcm_token TEXT,
  device_info JSONB,
  is_active BOOLEAN,
  created_at TIMESTAMP,
  updated_at TIMESTAMP,
  last_used_at TIMESTAMP
);

-- ุฌุฏูู ุณุฌู ุงูุฅุดุนุงุฑุงุช
CREATE TABLE notification_logs (
  id UUID PRIMARY KEY,
  user_phone VARCHAR(20),
  notification_type VARCHAR(50),
  title TEXT,
  message TEXT,
  success BOOLEAN,
  sent_at TIMESTAMP
);
```

---

## ๐ API Endpoints

### ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช
```http
POST /api/notifications/order-status
{
  "userPhone": "0501234567",
  "orderId": "12345",
  "newStatus": "shipped",
  "customerName": "ุฃุญูุฏ ูุญูุฏ"
}
```

### ุฅุฏุงุฑุฉ ุงูุฑููุฒ
```http
GET /api/notifications/tokens/stats
POST /api/notifications/tokens/cleanup
POST /api/notifications/tokens/validate
DELETE /api/notifications/tokens/user/:userPhone
```

---

## ๐ ุงููุฑุงูุจุฉ ูุงูุตูุงูุฉ

### ููุงู ุฏูุฑูุฉ ุชููุงุฆูุฉ
- **ููููุงู 2:00 ุต**: ุชูุธูู ุงูุฑููุฒ ุงููุฏููุฉ
- **ุฃุณุจูุนูุงู**: ุงูุชุญูู ูู ุตุญุฉ ุงูุฑููุฒ
- **ุดูุฑูุงู**: ุตูุงูุฉ ุดุงููุฉ

### ุฅุญุตุงุฆูุงุช ูุชุงุญุฉ
- ุฅุฌูุงูู ุงูุฑููุฒ ุงููุดุทุฉ
- ูุนุฏู ุงูุงุณุชุฎุฏุงู ุงููููู
- ูุณุจุฉ ูุฌุงุญ ุงูุฅุฑุณุงู
- ุงููุณุชุฎุฏููู ุงููุฑูุฏูู

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ูู ููุญุฉ ุงูุชุญูู
1. ุงูุชูู ุฅูู "ุฅุนุฏุงุฏุงุช ุงููุฏูุฑ"
2. ูุณู "ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ"
3. ุฃุฏุฎู ุฑูู ุงููุงุชู
4. ุงุถุบุท "ุฅุฑุณุงู ุฅุดุนุงุฑ ุชุฌุฑูุจู"

### ูู API
```bash
curl -X POST http://localhost:3000/api/notifications/test \
  -H "Content-Type: application/json" \
  -d '{"userPhone": "0501234567"}'
```

---

## ๐ ุงูุฃูุงู

### ุญูุงูุฉ ุงูุจูุงูุงุช
- FCM Tokens ูุดูุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- Private Keys ูุญููุฉ ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- ุชุญูู ูู ุตุญุฉ ุงูุฑููุฒ ุฏูุฑูุงู

### ุงูุชุญูู ูู ุงููุตูู
- API ูุญูู ุจู rate limiting
- ุชุณุฌูู ุฌููุน ุงูุนูููุงุช
- ูุฑุงูุจุฉ ุงูุฃูุดุทุฉ ุงููุดุจููุฉ

---

## ๐ ุงูุฃุฏุงุก

### ูุนุงููุฑ ุงูุฃุฏุงุก
- **ุฒูู ุงูุฅุฑุณุงู**: ุฃูู ูู 2 ุซุงููุฉ
- **ูุนุฏู ุงููุฌุงุญ**: ุฃูุซุฑ ูู 95%
- **ุงูุชูุณุน**: ูุฏุนู 100,000+ ูุณุชุฎุฏู
- **ุงูุงุณุชููุงู**: ุฃูู ูู 50MB RAM

### ุชุญุณููุงุช ุงูุฃุฏุงุก
- Connection pooling ูููุงุนุฏุฉ ุงูุจูุงูุงุช
- Batch processing ููุฅุดุนุงุฑุงุช ุงููุชุนุฏุฏุฉ
- Caching ููุฑููุฒ ุงููุดุทุฉ
- Compression ููุจูุงูุงุช ุงููุฑุณูุฉ

---

## ๐จ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ
1. **FCM Token ุบูุฑ ุตุงูุญ**: ูุชู ุชุนุทููู ุชููุงุฆูุงู
2. **ูุดู ุงูุฅุฑุณุงู**: ููุณุฌู ูู notification_logs
3. **ุฑููุฒ ูุฏููุฉ**: ุชูุญุฐู ุชููุงุฆูุงู ุจุนุฏ 30 ููู

### ุณุฌูุงุช ุงููุธุงู
```bash
# ูุฑุงูุจุฉ ุงูุณุฌูุงุช
tail -f logs/notifications.log

# ูุญุต ุงูุฃุฎุทุงุก
grep "ERROR" logs/notifications.log
```

---

## ๐ ุงูุฏุนู ุงูุชููู

ููุญุตูู ุนูู ุงูุฏุนู ุงูุชููู ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
- ุชุญูู ูู ุงูุณุฌูุงุช ุฃููุงู
- ุงุณุชุฎุฏู ุฃุฏูุงุช ุงูุงุฎุชุจุงุฑ ุงููุฏูุฌุฉ
- ุฑุงุฌุน ุงูุฅุญุตุงุฆูุงุช ูู ููุญุฉ ุงูุชุญูู

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุชู ุชุทููุฑ ูุธุงู ุฅุดุนุงุฑุงุช ููุฑูุฉ ุงุญุชุฑุงูู ููุจู ุฌููุน ุงููุชุทูุจุงุช:
- โ ุฅุดุนุงุฑุงุช ููุฑูุฉ 100%
- โ ูุณุชูุฏูุฉ ููู ูุณุชุฎุฏู
- โ ูุงุจูุฉ ููุชูุณุน ูู 100,000+ ูุณุชุฎุฏู
- โ ุฅุฏุงุฑุฉ ุฐููุฉ ููุฑููุฒ
- โ ูุฑุงูุจุฉ ูุตูุงูุฉ ุชููุงุฆูุฉ
- โ ูุธุงู production-ready

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ ููููุฑ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ ูุน ุฅุดุนุงุฑุงุช ููุฑูุฉ ููุซููุฉ.
