# ๐ ูุธุงู ุงูุฅุนุงุฏุฉ ุงููุณุชูุฑุฉ ูุฌูุจ ุงูุทูุจุงุช

## ๐ฏ ุงููุฏู

ุนูุฏูุง ููุดู ุฌูุจ ุงูุทูุจุงุช ูู Backendุ ูุง ูุชููู ุงููุธุงู. ุจุฏูุงู ูู ุฐูู:
1. โ ูุณุชูุฑ ูู ูุญุงููุฉ ุงูุฌูุจ ุจุดูู ูุณุชูุฑ ุญุชู ููุฌุญ
2. โ ูุจูู ูุคุดุฑ ุงูุชุญููู ุธุงูุฑุงู ุทูุงู ุงูููุช
3. โ ูุง ูุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ูููุณุชุฎุฏู
4. โ ูุฒูุฏ ููุช ุงูุงูุชุธุงุฑ ุชุฏุฑูุฌูุงู (Exponential Backoff)

---

## ๐ง ููููุฉ ุงูุนูู

### ุงููุดููุฉ ุงูุณุงุจูุฉ โ

```
ุฌูุจ ุงูุทูุจุงุช
    โ
ูุดู ุงูุงุชุตุงู
    โ
ูุญุงููุฉ 1 โ ูุดู
ูุญุงููุฉ 2 โ ูุดู
ูุญุงููุฉ 3 โ ูุดู
ูุญุงููุฉ 4 โ ูุดู
ูุญุงููุฉ 5 โ ูุดู
    โ
ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ
    โ
ุงูุชููู โ
```

### ุงูุญู ุงูุฌุฏูุฏ โ

```
ุฌูุจ ุงูุทูุจุงุช
    โ
ูุดู ุงูุงุชุตุงู
    โ
ูุญุงููุฉ 1 โ ูุดู โ ุงูุชุธุฑ 2 ุซุงููุฉ
ูุญุงููุฉ 2 โ ูุดู โ ุงูุชุธุฑ 4 ุซูุงู
ูุญุงููุฉ 3 โ ูุดู โ ุงูุชุธุฑ 6 ุซูุงู
ูุญุงููุฉ 4 โ ูุดู โ ุงูุชุธุฑ 8 ุซูุงู
ูุญุงููุฉ 5 โ ูุดู โ ุงูุชุธุฑ 10 ุซูุงู
ูุญุงููุฉ 6 โ ูุดู โ ุงูุชุธุฑ 12 ุซุงููุฉ
...
ูุญุงููุฉ N โ ูุฌุญ โ
    โ
ุนุฑุถ ุงูุทูุจุงุช
```

---

## ๐ ุขููุฉ ุงูุฅุนุงุฏุฉ

### 1๏ธโฃ ุฃููุงุน ุงูุฃุฎุทุงุก ุงููุนุงูุฌุฉ

```dart
// TimeoutException - ุงูุชูุช ูููุฉ ุงูุงูุชุธุงุฑ
// ClientException - ูุดู ุงูุงุชุตุงู ุจุงูุฎุงุฏู
// Exception - ุฃู ุฎุทุฃ ุขุฎุฑ
```

### 2๏ธโฃ ุญุณุงุจ ููุช ุงูุงูุชุธุงุฑ

```dart
// ุงูุตูุบุฉ: 2 * (ูุญุงููุฉ + 1) ุซุงููุฉ
// ูุน ุญุฏ ุฃูุตู 30 ุซุงููุฉ

final waitSeconds = (2 * (retryAttempt + 1)).clamp(2, 30);

// ุฃูุซูุฉ:
// ูุญุงููุฉ 1: 2 * (0 + 1) = 2 ุซุงููุฉ
// ูุญุงููุฉ 2: 2 * (1 + 1) = 4 ุซูุงู
// ูุญุงููุฉ 3: 2 * (2 + 1) = 6 ุซูุงู
// ูุญุงููุฉ 4: 2 * (3 + 1) = 8 ุซูุงู
// ูุญุงููุฉ 5: 2 * (4 + 1) = 10 ุซูุงู
// ูุญุงููุฉ 6: 2 * (5 + 1) = 12 ุซุงููุฉ
// ...
// ูุญุงููุฉ 15+: 30 ุซุงููุฉ (ุงูุญุฏ ุงูุฃูุตู)
```

### 3๏ธโฃ ุงูุณุฌูุงุช

```
โ ุงูุชูุช ูููุฉ ุงูุงูุชุธุงุฑ (ูุญุงููุฉ 1)
๐ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุจุนุฏ 2s... (ูุญุงููุฉ 1)

โ ูุดู ุงูุงุชุตุงู ุจุงูุฎุงุฏู (ูุญุงููุฉ 2)
๐ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุจุนุฏ 4s... (ูุญุงููุฉ 2)

โ ุฎุทุฃ ูู ุชุญููู ุงูุทูุจุงุช: ... (ูุญุงููุฉ 3)
๐ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุจุนุฏ 6s... (ูุญุงููุฉ 3)

โ ุชู ุชุญููู 10 ุทูุจ - ุงููุฌููุน: 10
```

---

## ๐ก๏ธ ุขููุงุช ุงูุญูุงูุฉ

### 1๏ธโฃ ูุญุต ูุนุฑู ุงูุทูุจ (Request ID)

```dart
// ุฅูุดุงุก ูุนุฑู ูุฑูุฏ ููู ุทูุจ
final requestId = ++_currentRequestId;

// ูุญุต ุฅุฐุง ุชู ุฅูุบุงุก ุงูุทูุจ
if (requestId != _currentRequestId) {
  debugPrint('๐ซ ุชู ุฅูุบุงุก ุงูุทูุจ $requestId');
  return;
}
```

### 2๏ธโฃ ููุน ุงูุทูุจุงุช ุงููุชุฒุงููุฉ

```dart
// ููุน ุงูุทูุจุงุช ุงููุชุนุฏุฏุฉ ุงููุชุฒุงููุฉ
if (_isLoading || (isLoadMore && _isLoadingMore)) {
  return;
}
```

### 3๏ธโฃ ูุญุต ุงูู Context

```dart
// ุงูุชุญูู ูู ุฃู ุงูู Context ูุง ูุฒุงู ุตุญูุญุงู
if (requestId == _currentRequestId) {
  return _loadOrdersFromDatabase(...);
}
```

---

## ๐ฑ ุงูุณููุงุฑูููุงุช

### ุงูุณููุงุฑูู 1๏ธโฃ: ุงูุฅูุชุฑูุช ุจุทูุก

```
ุงููุณุชุฎุฏู ููุชุญ ุตูุญุฉ ุงูุทูุจุงุช
    โ
ุงูุฅูุชุฑูุช ุจุทูุก ุฌุฏุงู
    โ
ุงูุชูุช ูููุฉ ุงูุงูุชุธุงุฑ (30 ุซุงููุฉ)
    โ
ุฅุนุงุฏุฉ ูุญุงููุฉ ุชููุงุฆูุฉ
    โ
ุงูุฅูุชุฑูุช ุฃุตุจุญ ุฃุณุฑุน
    โ
โ ุชู ุฌูุจ ุงูุทูุจุงุช ุจูุฌุงุญ
```

### ุงูุณููุงุฑูู 2๏ธโฃ: ุงูุฎุงุฏู ูุนุทู ูุคูุชุงู

```
ุงููุณุชุฎุฏู ููุชุญ ุตูุญุฉ ุงูุทูุจุงุช
    โ
ุงูุฎุงุฏู ูุนุทู
    โ
ูุดู ุงูุงุชุตุงู
    โ
ุฅุนุงุฏุฉ ูุญุงููุฉ ุชููุงุฆูุฉ (ูู 2-30 ุซุงููุฉ)
    โ
ุงูุฎุงุฏู ุนุงุฏ ููุนูู
    โ
โ ุชู ุฌูุจ ุงูุทูุจุงุช ุจูุฌุงุญ
```

### ุงูุณููุงุฑูู 3๏ธโฃ: ุงููุทุงุน ุงูุฅูุชุฑูุช

```
ุงููุณุชุฎุฏู ููุชุญ ุตูุญุฉ ุงูุทูุจุงุช
    โ
ุงูุฅูุชุฑูุช ูููุทุน
    โ
ูุดู ุงูุงุชุตุงู
    โ
ุฅุนุงุฏุฉ ูุญุงููุฉ ุชููุงุฆูุฉ (ูู 2-30 ุซุงููุฉ)
    โ
ุงููุณุชุฎุฏู ูุนูุฏ ุงูุงุชุตุงู
    โ
โ ุชู ุฌูุจ ุงูุทูุจุงุช ุจูุฌุงุญ
```

---

## ๐ฏ ุงูููุงุฆุฏ

โ **ูุง ุชููู:** ุงููุธุงู ูุง ูุชููู ุฃุจุฏุงู ุนู ุงููุญุงููุฉ
โ **ุฐูู:** ูุฒูุฏ ููุช ุงูุงูุชุธุงุฑ ุชุฏุฑูุฌูุงู (Exponential Backoff)
โ **ุขูู:** ุญุฏ ุฃูุตู 30 ุซุงููุฉ ูููุช ุงูุงูุชุธุงุฑ
โ **ูุฑู:** ูุชุนุงูู ูุน ุฌููุน ุฃููุงุน ุงูุฃุฎุทุงุก
โ **ุณูุณ:** ูุง ูุฒุนุฌ ุงููุณุชุฎุฏู ุจุฑุณุงุฆู ุฎุทุฃ

---

## ๐ ุงููููุงุช ุงููุชุนููุฉ

- `frontend/lib/pages/orders_page.dart` - ุตูุญุฉ ุงูุทูุจุงุช
- `frontend/lib/pages/advanced_orders_management_page.dart` - ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุทูุจุงุช ุงููุชูุฏูุฉ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุทูุจุงุช ูุง ุชุฒุงู ูุง ุชุญูู

**ุงูุญู:**
1. ุชุญูู ูู ุณุฌูุงุช ุงูุชุทุจูู (debugPrint)
2. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
3. ุชุญูู ูู Backend API
4. ุชุญูู ูู ูุนุฑู ุงููุณุชุฎุฏู

### ุงููุดููุฉ: ุงูุงูุชุธุงุฑ ุทููู ุฌุฏุงู

**ุงูุญู:**
- ุงูุญุฏ ุงูุฃูุตู ููุงูุชุธุงุฑ ูู 30 ุซุงููุฉ
- ุฅุฐุง ุงุณุชูุฑ ุงููุดูุ ูุฏ ุชููู ููุงู ูุดููุฉ ูู Backend

---

## ๐ง ุงูุชุญุณููุงุช ุงูุฌุฏูุฏุฉ

### 1๏ธโฃ ูุคุดุฑ ุงูุชุญููู ูุจูู ุธุงูุฑุงู

```dart
// โ ูุจู: ูุงู ูุฎุชูู ุจุนุฏ ูุดู ุงููุญุงููุฉ
// โ ุงูุขู: ูุจูู ุธุงูุฑุงู ุทูุงู ุงูููุช

// ูู ูู ูุญุงููุฉ ูุงุดูุฉ:
setState(() {
  _isLoading = true;  // โ ุฅุจูุงุก ูุคุดุฑ ุงูุชุญููู
});
```

### 2๏ธโฃ ุงูู finally ูุง ูููู ุงูุชุญููู ุฃุซูุงุก ุงูุฅุนุงุฏุฉ

```dart
// โ ูุจู: ูุงู ูููู ุงูุชุญููู ูู ูู ูุฑุฉ
// โ ุงูุขู: ููููู ููุท ุนูุฏ ุงููุฌุงุญ

finally {
  if (_orders.isNotEmpty) {  // โ ููุท ุนูุฏ ุงููุฌุงุญ
    setState(() {
      _isLoading = false;
    });
  }
}
```

### 3๏ธโฃ ุฌููุน ุงูุฏูุงู ุชุณุชุฎุฏู ูุธุงู ุงูุฅุนุงุฏุฉ

- โ `_loadOrdersFromDatabase()` - ุฌูุจ ุงูุทูุจุงุช ุงูุฑุฆูุณูุฉ
- โ `_loadOrderCounts()` - ุฌูุจ ุงูุนุฏุงุฏุงุช
- โ `_getScheduledOrders()` - ุฌูุจ ุงูุทูุจุงุช ุงููุฌุฏููุฉ

---

## ๐ก ููุงุญุธุงุช

- ุงููุธุงู ูุณุชูุฑ ูู ุงููุญุงููุฉ ุจุฏูู ุญุฏ ุฃูุตู
- ููุช ุงูุงูุชุธุงุฑ ูุฒูุฏ ุชุฏุฑูุฌูุงู (2s, 4s, 6s, 8s, 10s, 12s, ..., 30s)
- ูุง ูุชู ุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ูููุณุชุฎุฏู
- ูุชู ุชุณุฌูู ุฌููุน ุงููุญุงููุงุช ูู ุงูุณุฌูุงุช
- ูุคุดุฑ ุงูุชุญููู ูุจูู ุธุงูุฑุงู ุทูุงู ุงูููุช

