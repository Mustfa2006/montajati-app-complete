/**
 * ðŸ” ØªØ´Ø®ÙŠØµ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø±Ø³Ù„ Ù„Ù„ÙˆØ³ÙŠØ·
 */

console.log('ðŸ” Ø¨Ø¯Ø¡ ØªØ´Ø®ÙŠØµ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø±Ø³Ù„ Ù„Ù„ÙˆØ³ÙŠØ·...');
console.log('='.repeat(60));

// Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…Ø¨Ù„ØºØ©:
console.log('ðŸ“‹ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…Ø¨Ù„ØºØ©:');
console.log('   ðŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: 24,000 Ø¯.Ø¹');
console.log('   ðŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø±Ø³Ù„ Ù„Ù„ÙˆØ³ÙŠØ·: 21,000 Ø¯.Ø¹');
console.log('   ðŸ“‰ Ø§Ù„ÙØ±Ù‚: 3,000 Ø¯.Ø¹ (Ù†Ø§Ù‚Øµ)');

console.log('\nðŸ” Ø§Ù„ØªØ­Ù„ÙŠÙ„:');
console.log('1. Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ù„Ø§ ØªØ²Ø§Ù„ Ù…ÙˆØ¬ÙˆØ¯Ø© Ø±ØºÙ… Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø³Ø§Ø¨Ù‚');
console.log('2. ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ£Ø®Ø° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙƒÙ…Ø§ Ù‡Ùˆ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©');
console.log('3. Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ù‚Ø¯ ØªÙƒÙˆÙ† ÙÙŠ:');
console.log('   - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ³ÙŠØ· Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹ (waseet_data)');
console.log('   - Ø¹Ø¯Ù… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©');
console.log('   - Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø­Ø³Ø§Ø¨ order.total Ù†ÙØ³Ù‡');

console.log('\nðŸŽ¯ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:');
console.log('1. Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† order.total ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ØµØ­ÙŠØ­');
console.log('2. Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ³ÙŠØ· Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©');
console.log('3. Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙŠØ¹Ù…Ù„ Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©');

console.log('\nðŸ“ Ø®Ø·Ø© Ø§Ù„Ø¹Ù…Ù„:');
console.log('1. ÙØ­Øµ Ø·Ù„Ø¨ Ù…Ø­Ø¯Ø¯ ÙˆØ¨ÙŠØ§Ù†Ø§ØªÙ‡');
console.log('2. Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ³ÙŠØ·');
console.log('3. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ÙˆØ³ÙŠØ·');

// Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ù…Ø·ÙˆØ±
console.log('\nðŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø­Ù„:');
console.log('1. ØªØ´ØºÙŠÙ„: node fix_existing_orders_price.js');
console.log('2. Ø£Ùˆ Ø­Ø°Ù waseet_data Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¦Ù‡Ø§');
console.log('3. Ø£Ùˆ ØªØ­Ø¯ÙŠØ« waseet_data.totalPrice ÙŠØ¯ÙˆÙŠØ§Ù‹');

console.log('\nðŸ”§ ÙƒÙˆØ¯ SQL Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:');
console.log(`
-- Ø¥ØµÙ„Ø§Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
UPDATE orders 
SET waseet_data = NULL 
WHERE waseet_data IS NOT NULL;

-- Ø£Ùˆ ØªØ­Ø¯ÙŠØ« totalPrice Ù…Ø¨Ø§Ø´Ø±Ø©
UPDATE orders 
SET waseet_data = jsonb_set(
    waseet_data::jsonb, 
    '{totalPrice}', 
    total::text::jsonb
)
WHERE waseet_data IS NOT NULL 
AND (waseet_data::jsonb->>'totalPrice')::numeric != total;
`);

console.log('\nðŸŽ¯ Ø§Ù„Ø®Ù„Ø§ØµØ©:');
console.log('Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ù„Ø¯ÙŠÙ‡Ø§ Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ³ÙŠØ· Ù‚Ø¯ÙŠÙ…Ø© Ø¨Ù…Ø¨Ù„Øº Ø®Ø§Ø·Ø¦');
console.log('Ø§Ù„Ø­Ù„: Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ³ÙŠØ· Ø£Ùˆ ØªØ­Ø¯ÙŠØ« totalPrice');

console.log('\nâœ… Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ØªØ´Ø®ÙŠØµ');
