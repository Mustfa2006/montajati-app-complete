<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ø­Ø¨ - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    .card {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    }

    h1 {
      color: #1a1a2e;
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 10px;
      text-align: center;
    }

    .subtitle {
      color: #666;
      text-align: center;
      margin-bottom: 40px;
      font-size: 16px;
    }

    .setting-group {
      margin-bottom: 30px;
      padding: 25px;
      background: #f8f9fa;
      border-radius: 15px;
    }

    .setting-label {
      font-size: 18px;
      font-weight: 700;
      color: #1a1a2e;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 34px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked+.slider {
      background-color: #4CAF50;
    }

    input:checked+.slider:before {
      transform: translateX(26px);
    }

    .status-badge {
      display: inline-block;
      padding: 8px 20px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 700;
    }

    .status-enabled {
      background: #d4edda;
      color: #155724;
    }

    .status-disabled {
      background: #f8d7da;
      color: #721c24;
    }

    textarea {
      width: 100%;
      padding: 15px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-family: 'Cairo', sans-serif;
      font-size: 16px;
      resize: vertical;
      min-height: 100px;
      transition: border-color 0.3s;
    }

    textarea:focus {
      outline: none;
      border-color: #ffd700;
    }

    .btn {
      width: 100%;
      padding: 15px;
      border: none;
      border-radius: 10px;
      font-family: 'Cairo', sans-serif;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-primary {
      background: linear-gradient(135deg, #ffd700, #e6b31e);
      color: #1a1a2e;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
    }

    .btn-primary:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }

    .alert {
      padding: 15px 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-weight: 600;
      display: none;
    }

    .alert-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .alert-error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .loading {
      text-align: center;
      padding: 20px;
      color: #666;
    }

    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #ffd700;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="card">
      <h1>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ø­Ø¨</h1>
      <p class="subtitle">Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ ØªÙØ¹ÙŠÙ„ ÙˆØªØ¹Ø·ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p>

      <div id="alert" class="alert"></div>

      <div class="setting-group">
        <div class="setting-label">
          <span>Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ø­Ø¨:</span>
          <span id="statusBadge" class="status-badge status-enabled">Ù…ÙØ¹Ù„</span>
        </div>

        <label class="toggle-switch">
          <input type="checkbox" id="withdrawalToggle" checked>
          <span class="slider"></span>
        </label>
      </div>

      <div class="setting-group">
        <div class="setting-label">Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ø®ØµØµØ©:</div>
        <textarea id="messageInput"
          placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙŠ Ø³ØªØ¸Ù‡Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ù†Ø¯ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø³Ø­Ø¨...">Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø³Ø­Ø¨ Ù…ØªÙˆÙ‚ÙØ© Ø­Ø§Ù„ÙŠØ§Ù‹</textarea>
      </div>

      <button class="btn btn-primary" id="saveBtn" onclick="saveSettings()">
        ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
      </button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // Ø¥Ø¹Ø¯Ø§Ø¯ Supabase
    const SUPABASE_URL = 'https://fqdhskaolzfavapmqodl.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZxZGhza2FvbHpmYXZhcG1xb2RsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA5NzI3MDYsImV4cCI6MjA0NjU0ODcwNn0.4249_4249';
    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const toggle = document.getElementById('withdrawalToggle');
    const statusBadge = document.getElementById('statusBadge');
    const messageInput = document.getElementById('messageInput');
    const saveBtn = document.getElementById('saveBtn');
    const alertDiv = document.getElementById('alert');

    // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù…ÙØªØ§Ø­
    toggle.addEventListener('change', function () {
      if (this.checked) {
        statusBadge.textContent = 'Ù…ÙØ¹Ù„';
        statusBadge.className = 'status-badge status-enabled';
      } else {
        statusBadge.textContent = 'Ù…Ø¹Ø·Ù„';
        statusBadge.className = 'status-badge status-disabled';
      }
    });

    // Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
    async function loadSettings() {
      try {
        const { data, error } = await supabase
          .from('app_settings')
          .select('setting_value, message')
          .eq('setting_key', 'withdrawal_enabled')
          .single();

        if (error) throw error;

        const isEnabled = data.setting_value === 'true';
        toggle.checked = isEnabled;
        messageInput.value = data.message || 'Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø³Ø­Ø¨ Ù…ØªÙˆÙ‚ÙØ© Ø­Ø§Ù„ÙŠØ§Ù‹';

        if (isEnabled) {
          statusBadge.textContent = 'Ù…ÙØ¹Ù„';
          statusBadge.className = 'status-badge status-enabled';
        } else {
          statusBadge.textContent = 'Ù…Ø¹Ø·Ù„';
          statusBadge.className = 'status-badge status-disabled';
        }
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:', error);
        showAlert('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'error');
      }
    }

    // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    async function saveSettings() {
      saveBtn.disabled = true;
      saveBtn.textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';

      try {
        const isEnabled = toggle.checked;
        const message = messageInput.value.trim() || 'Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø³Ø­Ø¨ Ù…ØªÙˆÙ‚ÙØ© Ø­Ø§Ù„ÙŠØ§Ù‹';

        const { error } = await supabase
          .from('app_settings')
          .update({
            setting_value: isEnabled ? 'true' : 'false',
            message: message
          })
          .eq('setting_key', 'withdrawal_enabled');

        if (error) throw error;

        showAlert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!', 'success');
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:', error);
        showAlert('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'error');
      } finally {
        saveBtn.disabled = false;
        saveBtn.textContent = 'ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª';
      }
    }

    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªÙ†Ø¨ÙŠÙ‡
    function showAlert(message, type) {
      alertDiv.textContent = message;
      alertDiv.className = `alert alert-${type}`;
      alertDiv.style.display = 'block';

      setTimeout(() => {
        alertDiv.style.display = 'none';
      }, 5000);
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    loadSettings();
  </script>
</body>

</html>